model:
  pretrained_name: "/llm_reco/dehua/model/Qwen2.5-VL-7B-Instruct"
  num_labels: 101  # Food101的类别数

# 损失函数配置
loss:
  type: "label_smoothing"  # 选项: cross_entropy, focal, label_smoothing, arcface, symmetric_ce
  smoothing: 0.1
  temperature: 1.0

# 统一频率设置（推荐且唯一支持的方式）
monitor:
  freq:
    training_log_freq: 20      # 训练指标记录频率
    eval_log_freq: 1            # 评估指标记录频率（跳过评估时不使用）
    perf_log_freq: 50          # 性能指标记录频率
    gpu_log_freq: 50           # GPU监控频率
    flops_profile_freq: 50     # MFU计算频率 (使用profiler)
    local_save_freq: 500       # 本地日志保存频率
    progress_update_freq: 50    # 进度更新频率

# 单数据集配置
datasets:
  dataset_configs:
    food101:
      num_classes: 101
      description: "Food-101 dataset"
      eval_ratio: 1  # 跳过评估时不使用
  # 单数据集不需要logits masking
  enable_logits_masking: false
  # 单数据集不需要shuffle
  shuffle_datasets: false

data:
  # 单数据集使用原始格式
  train_jsonl: "/llm_reco/dehua/code/qwen_classify/data/dataset_food_label/food101_train.jsonl"
  val_jsonl: "/llm_reco/dehua/code/qwen_classify/data/dataset_food_label/food101_test.jsonl"

training:
  epochs: 5
  lr: 5e-6
  weight_decay: 0.01
  warmup_steps: 200
  output_dir: "/mmu_mllm_hdd_2/madehua/model/qwen_classify/food101_no_eval_save_all"
  logging_steps: 50
  save_steps: 200
  eval_steps: 200  # 虽然设置了，但由于skip_evaluation=true会被忽略
  save_hf_format: true
  save_deepspeed_format: false
  
  # 🔥 新增功能：跳过评估和保存所有checkpoint
  skip_evaluation: true         # 跳过所有评估，只进行训练
  save_all_checkpoints: true    # 保存所有checkpoint，而不是只保存最佳的
  
  # 以下配置在skip_evaluation=true时会被自动禁用
  best_model_tracking:
    enabled: false              # 将被自动设置为false
    metric: "overall_accuracy"
    mode: "max"
    save_best_only: false       # 将被自动设置为false
  
  evaluation:
    partial_eval_during_training: false  # 将被自动设置为false
    full_eval_at_end: false             # 将被自动设置为false
    eval_best_model_only: false         # 将被自动设置为false

# 其他配置
optimizer:
  type: "adamw"
  lr: 5e-6
  weight_decay: 0.01
  eps: 1e-8

lr_scheduler:
  type: "cosine"
  warmup_steps: 200
  min_lr_ratio: 0.01

deepspeed:
  config_path: "configs/ds_s2_as_8.json"

# 如果不想使用wandb记录，可以禁用
wandb:
  enabled: true
  project: "qwen_classify_no_eval"
  name: "food101_no_eval_save_all"
  log_code: false
  log_dataset_metrics: false  # 跳过评估时不需要数据集指标 