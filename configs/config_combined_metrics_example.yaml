# é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼šç¡®ä¿trainingå’ŒevalæŒ‡æ ‡éƒ½èƒ½æ­£ç¡®æ˜¾ç¤º
# å…³é”®è®¾ç½®ï¼ševal_stepså’Œlogging_stepsçš„å…³ç³»

# åŸºç¡€é…ç½®
output_dir: "./output/combined_metrics_test"
model_name: "Qwen/Qwen2.5-VL-7B-Instruct"
max_length: 512
num_epochs: 3

# è®­ç»ƒé…ç½®
training:
  num_epochs: 3
  evaluation:
    partial_eval_during_training: true
    full_eval_at_end: true
    eval_best_model_only: true
  best_model_tracking:
    enabled: true
    metric: "overall_accuracy"
    mode: "max"
    save_best_only: false

# ğŸ”¥ å…³é”®é¢‘ç‡è®¾ç½® - ç¡®ä¿trainingå’ŒevalæŒ‡æ ‡éƒ½èƒ½æ˜¾ç¤º
# æ–¹æ¡ˆ1ï¼ševal_steps = logging_steps (æ¨è)
eval_steps: 100        # æ¯100æ­¥è¯„ä¼°ä¸€æ¬¡
logging_steps: 100     # æ¯100æ­¥è®°å½•ä¸€æ¬¡æ—¥å¿—
save_steps: 500        # æ¯500æ­¥ä¿å­˜ä¸€æ¬¡æ£€æŸ¥ç‚¹

# æ–¹æ¡ˆ2ï¼ševal_stepsæ˜¯logging_stepsçš„å€æ•°
# eval_steps: 200        # æ¯200æ­¥è¯„ä¼°ä¸€æ¬¡
# logging_steps: 100     # æ¯100æ­¥è®°å½•ä¸€æ¬¡æ—¥å¿—
# save_steps: 500        # æ¯500æ­¥ä¿å­˜ä¸€æ¬¡æ£€æŸ¥ç‚¹

# æ–¹æ¡ˆ3ï¼šlogging_stepsæ˜¯eval_stepsçš„å€æ•°
# eval_steps: 50         # æ¯50æ­¥è¯„ä¼°ä¸€æ¬¡
# logging_steps: 100     # æ¯100æ­¥è®°å½•ä¸€æ¬¡æ—¥å¿—
# save_steps: 500        # æ¯500æ­¥ä¿å­˜ä¸€æ¬¡æ£€æŸ¥ç‚¹

# ç›‘æ§é¢‘ç‡é…ç½®
monitor:
  freq:
    log_freq: 100           # è®­ç»ƒæ—¥å¿—é¢‘ç‡
    eval_log_freq: 100      # è¯„ä¼°æ—¥å¿—é¢‘ç‡
    perf_log_freq: 100      # æ€§èƒ½æŒ‡æ ‡æ—¥å¿—é¢‘ç‡
    flops_profile_freq: 500 # MFUè®¡ç®—é¢‘ç‡

# WandBé…ç½®
wandb:
  enabled: true
  project: "qwen_classify_combined_metrics"
  name: "test_combined_metrics"
  log_dataset_metrics: true

# æ•°æ®é›†é…ç½®
datasets:
  dataset_configs:
    food101:
      name: "food101"
      split: "test"
      max_samples: 1000
    imagenet:
      name: "imagenet-1k"
      split: "validation"
      max_samples: 1000

# DeepSpeedé…ç½®
deepspeed: "configs/ds_config.json"

# å…¶ä»–é…ç½®
save_deepspeed_format: true
save_hf_format: true 